# Glory2Aurora 
Скрипт, значительно расширяющий функционал Авроры
<br>

## Где исходники?
В данный момент код рефакторится для того, чтобы его можно было залить в репо. Пока там все ужасно)

## [**Скачать скрипт [1.1]**](https://www.upload.ee/download/13998878/f898729386de1ac65483/Glory2Aurora_1.1.zip) 


## Фитчи:
1) Сохранение в JSON и выгрузка работы из JSON-файла (можно полностью выгрузить чужую работу в аврору)
2) Полная выгрузка исходников с сервера авроры в отдельную папку
3) Открытие исходников в Visual Studio одним кликом и их последующая выгрузка на сервер авроры
4) Генерация методов (пока недоработано, нет наследования, деструкторов и мелкие баги)
5) Генерация алгоритмов (тоже недоработано, баги с номерами переходов, нет деструкторов, несоответствие методичке, кривая реализация циклов)
6) Частичное редактирование (насколько позволяет API) и просмотр уже сданных работ
7) Удалена защита от копирования\вставки
8) Удалена защита от быстрой печати (основная причина, по которой пришлось писать этот скрипт)
9) Запоминание аккаунта
10) Пользовательские патчи (можете запросто перерегистрировать task-модули, регистрируемые с помощью объекта DS, и переписать часть функционала Авроры)
11) Анти-афк
и еще кое-что.

### Установка: 
Скопировать все содержимое архива в папку с EXE авроры `(в *путь*\ARM_Student\)`

### Запуск скрипта: 
С помощью "Glory2Aurora.exe". Скрипт сам поднимает аврору в режиме отладки, подключается к дебаг-порту, инъецирует скрипт, применяет нужные патчи.
<br>


### Changelog последней версии
*Версия 1.1:*

> 1) Теперь скрипт сообщает об ошибках компиляции во время генерации методов\алгоритмов
> (под капотом там libclang в обёртке CppAst)
> 2) В генерируемых методах появились конструкторы (но не деструкторы. К сожалению, в CppAst нет поддержки деструкторов)
> 3) Исправлен модификатор доступа в алгоритмах (теперь он пишется с маленькой буквы и проходит в авроре)
> 4) Добавлено условное разделение методов классов на "Функции" и "Методы" (возвращает значение - функция, иначе - метод)
> 5) Добавлены недостающие идентификаторы языка C++ из методички
> 6) В алгоритмах название класса теперь тоже заполняется автоматически
> 7) Багфикс загрузки файлов (старый код во вкладке "Исходный код" больше не перезапишет новые файлы)
> 8) Открытие комментария к заданию без закрытия задачи из меню скрипта

### FAQ
1) *После запуска программы ничего не происходит* - проверьте, что вы распаковали скрипт по верному пути (в ту же папку, где находится EXE авроры) и запускаете его с помощью Glory2Aurora.exe (без аргументов!)
2) *После открытия исходников в Visual Studio командная строка появляется на долю секунды и исчезает, далее ничего не происходит* - проверьте, что Visual Studio запускается с помощью команды "start devenv" из  командной строки. Если нет, то у вас есть проблемы с переменными окружения винды (переустановка VS поможет)
3) *Не генерируются методы\алгоритмы* - читайте ошибку в сообщениях Авроры справа сверху
4) *Аккаунт не сохраняется* - перед тем, как вводить какие-либо данные, подождите, пока скрипт внедрится в Аврору и появится галочка "Запомни меня".
5) *Как выйти из аккаунта?* - в "Настройках G2A" есть кнопка удаления сохраненных данных
6) *Как использовать пользовательские патчи?* -  создайте в папке с EXE авроры файл user-patches.txt, написав каждую JS-команду с новой строки (важно! даже целые task модули должны быть сохранены в одной строчке на команду. Используйте сайты для сжатия JS скрипта, их много)


P.S. Пока код дно, как найдутся силы, перепишу, пофикшу баги и зарелижу обновление. Основной функционал в общем и целом работает.
